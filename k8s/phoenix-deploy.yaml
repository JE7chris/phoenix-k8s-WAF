apiVersion: apps/v1
kind: Deployment
metadata:
  name: phoenix-deploy
  labels:
    app: phoenix
spec:
  replicas: 1
  selector:
    matchLabels:
      app: phoenix
  template:
    metadata:
      labels:
        app: phoenix
    spec:
      containers:
      - name: phoenix-container
        # ğŸ”¥ å…³é”®ç‚¹1ï¼šå¿…é¡»ç”¨åˆšæ‰æ„å»ºä¿®å¤å¥½çš„ v4.5 é•œåƒ
        image: je7chris/phoenix-app:v4.5
        # ğŸ”¥ å…³é”®ç‚¹2ï¼šä½¿ç”¨æœ¬åœ°é•œåƒï¼Œä¸å» DockerHub æ‹‰å–
        imagePullPolicy: Never
        ports:
        - containerPort: 5000
        # ğŸ”¥ å…³é”®ç‚¹3ï¼šç‰¹æƒæ¨¡å¼ï¼Sniffer æŠ“åŒ…å¿…é¡»è¦æœ‰ç½‘å¡æƒé™
        securityContext:
          privileged: true
          capabilities:
            add: ["NET_ADMIN", "NET_RAW"]
        env:
        # æŒ‡å‘ä½ çš„ Redis Service (å¦‚æœä½ çš„ Service åå­—æ˜¯ redis-service)
        - name: REDIS_HOST
          value: "redis" 
